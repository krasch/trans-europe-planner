<!DOCTYPE html>
<html lang="de">

<head>
    <meta name="description" content="Ohne Flugzeug quer durch Europa"/>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- maplibre -->
    <link rel="stylesheet" href="https://unpkg.com/maplibre-gl@4.6.0/dist/maplibre-gl.css"/>
    <script src="https://unpkg.com/maplibre-gl@4.6.0/dist/maplibre-gl.js"></script>

    <!-- styles -->
    <link rel="stylesheet" href="style/style.css">
    <link rel="stylesheet" href="style/calendar.css">

    <!-- scripts -->
    <script src="script/calendar.js"></script>
    <script src="script/map.js"></script>
    <script src="script/util.js"></script>

    <title>Trans-Europe-Planner</title>

</head>

<body>

<div id="map"></div>
<div id="calendar">

    <!-- date label at the top of calendar -->
    <template id="template-calendar-grid-date">
        <div class="calendar-grid-date"></div>
    </template>

    <!-- hour label at the left side of calendar -->
    <template id="template-calendar-grid-hour">
        <div class="calendar-grid-hour"></div>
    </template>

    <!-- the cells of the calendar -->
    <template id="template-calendar-grid-cell">
        <div class="calendar-grid-cell"></div>
    </template>

    <!-- the connections to be displayed in the calendar -->
    <template id="template-calendar-connection">
        <div class="calendar-connection" draggable="true">
            <img class="connection-icon" alt="icon of the connection TODO"/>
            <span class="connection-number"></span>
            <span class="connection-start-time"></span>
            <span class="connection-start-station"></span>
            <span class="connection-end-time"></span>
            <span class="connection-end-station"></span>
        </div>
    </template>

    <!-- All calendar elements will be added into the container below dynamically -->
    <div id="calendar-grid"></div>

</div>


<script>
    const map = new maplibregl.Map({
      container: 'map',
      style: "style/outdoors-modified.json",
      center: [13.408333, 52.518611],
      zoom: 4
    });

    map.on('load', () => initMap(map));

    const connections = [
        {
            icon: "images/train.svg",
            trainNumber: "ICE505",
            startDate: new Date("2023-10-16"),
            startTime: "8:29",
            startStation: "Berlin Hbf",
            endTime: "13:02",
            endStation: "München Hbf",
        },
        {
            icon: "images/train.svg",
            trainNumber: "EC87",
            startDate: new Date("2023-10-16"),
            startTime: "13:34",
            startStation: "München Hbf",
            endTime: "18:58",
            endStation: "Verona PN",
        },
        /*{
            trainNumber: "FR  8503",
            startDate: new Date("2023-10-17"),
            startTime: "09:37",
            startStation: "Verona PN",
            endTime: "11:24",
            endStation: "Firenze SMN",
        }*/
        {
            icon: "images/ferry.svg",
            trainNumber: "",
            startDate: new Date("2023-10-18"),
            startTime: "07:00",
            startStation: "Livorno",
            endTime: "11:30",
            endStation: "Bastia",
        },
    ];

    const calendar = document.getElementById("calendar-grid");
    initCalendarGrid(calendar);
    displayConnections(calendar, connections);

</script>

</body>
</html>
